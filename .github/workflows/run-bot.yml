name: Run Bot 24/7

on:
  schedule:
    - cron: "*/59 * * * *"  # Restart setiap 59 menit agar tetap berjalan
  workflow_dispatch:       # Bisa dijalankan manual

jobs:
  run-bot:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Install Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'  # Update ke Node.js versi terbaru

      - name: Debug File & Path
        run: |
          echo "ðŸ“‚ Cek isi repository:"
          ls -la
          echo "âœ… File yang tersedia telah dicek."

      - name: Install Dependencies
        run: |
          echo "ðŸ“¦ Memulai instalasi dependencies..."
          npm install
          echo "âœ… Instalasi dependencies selesai."

      - name: Jalankan Bot atau Server
        run: |
          echo "ðŸš€ Menjalankan index.js dan ff.js..."
          nohup node index.js &  
          nohup node ff.js &  
          sleep 3540  # Bot akan berjalan selama 59 menit sebelum restart
          echo "âœ… Bot selesai berjalan."
